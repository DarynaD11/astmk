<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Адмін-панель</title>
</head>
<body>
    <h1>Адмін-панель – редагування новин</h1>

    <h2>Додати новину</h2>
    <input type="text" id="title" placeholder="Заголовок">
    <textarea id="content" placeholder="Текст новини"></textarea>
    <button onclick="addNews()">Додати</button>

    <h2>Список новин</h2>
    <ul id="news-list"></ul>

    <script>
        async function loadNews() {
            const res = await fetch("http://localhost:3000/news");
            const news = await res.json();
            const list = document.getElementById("news-list");
            list.innerHTML = "";
            news.forEach(n => {
                list.innerHTML += `<li>${n.title} - ${n.content} 
                   <button onclick="deleteNews(${n.id})">Видалити</button>
                </li>`;
            });
        }

        async function addNews() {
            const title = document.getElementById("title").value;
            const content = document.getElementById("content").value;
            await fetch("http://localhost:3000/news", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ title, content })
            });
            loadNews();
        }

        async function deleteNews(id) {
            await fetch(`http://localhost:3000/news/${id}`, { method: "DELETE" });
            loadNews();
        }

        loadNews();
    </script>
</body>
</html>
